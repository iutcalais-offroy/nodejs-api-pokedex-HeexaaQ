meta {
  name: Create Deck
  type: http
  seq: 1
}

post {
  url: {{localhost}}/api/decks
  body: json
  auth: bearer
}

headers {
  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoicmVkQGV4YW1wbGUuY29tIiwiaWF0IjoxNzcwMzg0MjczLCJleHAiOjE3NzA5ODkwNzN9.5kIwZe3A6a_NkHyl7kYork_Nnz_nUJedQjMPA0YSgOI
}

auth:bearer {
  token: {{token}}
}

body:json {
  {
    "name": "My Starter Deck",
    "cards": [1, 4, 7, 25, 2, 5, 8, 26, 3, 6]
  }
}

vars:pre-request {
  localhost: http://localhost:3001
}

script:post-response {
  if (res.status === 201) {
    bru.setVar("deckId", res.body.id);
  }
}

docs {
  Create a new deck for the authenticated user.
  
  Requires authentication.
  
  Body:
  - name: string (required) - Name of the deck
  - cards: array of numbers (required) - Must contain exactly 10 card IDs
  
  Returns:
  - 201: Deck created successfully
  - 400: Invalid input (must be exactly 10 valid card IDs)
  - 401: Unauthorized
}
